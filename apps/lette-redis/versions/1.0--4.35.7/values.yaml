
# using 2 nodes, each node runs a redis instance
# if we drain one node, the other node can still serve requests
# redis becomes read-only when only one node is available.

# if in the future we have more nodes, we can set:
# replicas: number of nodes: 3
# hardAntiAffinity: true
# haproxy.HardAntiAffinity: true
# podDisruptionBudget.minAvailable: 2


replicas: 2
hardAntiAffinity: false

image:
  repository: redis
  tag: 7.2-alpine

#auth: true

sentinel:
  enabled: true
  quorum: 2
  downAfterMilliseconds: 5000
  failoverTimeout: 60000

haproxy:
  hardAntiAffinity: false
  enabled: true
  replicas: 2

persistentVolume:
  enabled: true
  size: 1Gi
  storageClass: ""



resources:
  redis:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 250m
      memory: 256Mi

  sentinel:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 100m
      memory: 128Mi

  haproxy:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 100m
      memory: 128Mi

podDisruptionBudget:
  enabled: true
  minAvailable: 1

metrics:
  enabled: false

networkPolicy:
  enabled: false